@import "tailwindcss";

/* Active la variante dark mode pour Tailwind v4 */
@variant dark (&:where(.dark, .dark *));

/* Variables CSS personnalisées */
:root {
  /* Light mode colors */
  --light-start: #f0eeea;
  --light-end: #F1ECE2;

  /* Dark mode colors */
  --dark-start: #020204;
  --dark-end: #040306;

  /* Text colors */
  --text-light: #000000;
  --text-dark: #ffffff;

  /* Muted/Subtitle colors */
  --text-muted-light: #505050;
  --text-muted-dark: #c0c0c0;

  /* ========================================
     DEPTH SYSTEM - 3 niveaux de profondeur
     ======================================== */

  /* Light mode - 3 niveaux */
  --bg-bottom-light: rgba(240, 238, 234, 1);      /* Fond global (gradient) */
  --bg-middle-light: rgb(245, 243, 240);    /* Cards */
  --bg-top-light: rgb(255, 255, 255);      /* Éléments cliquables */

  /* Dark mode - 3 niveaux (du plus sombre au plus clair) */
  --bg-bottom-dark: rgba(2, 2, 4, 1);             /* Fond global (gradient #020204) */
  --bg-middle-dark: rgb(12, 13, 16);        /* Cards - nettement plus clair que le fond */
  --bg-top-dark: rgb(32, 34, 38);          /* Éléments cliquables - encore plus clair */

  /* Hover states */
  --bg-middle-dark-hover: rgba(25, 28, 35, 0.95);
  --bg-top-dark-hover: rgba(45, 48, 55, 1);

  /* Shadow system - Inset highlight + double shadows pour profondeur naturelle */
  /* Inspiré de https://codepen.io/whosajid/pen/QWReYqV */

  /* Level 0 - Pas d'ombre */
  --shadow-0-light: none;
  --shadow-0-dark: none;

  /* Level 1 - Petite élévation (hover subtil, éléments flottants légers) */
  --shadow-1-light:
    inset 0 1px 1px rgba(255, 255, 255, 0.5),
    0 1px 2px rgba(0, 0, 0, 0.18),
    0 2px 4px rgba(0, 0, 0, 0.08);
  --shadow-1-dark:
    inset 0 1px 1px rgba(255, 255, 255, 0.12),
    0 1px 2px rgba(0, 0, 0, 0.7),
    0 2px 4px rgba(0, 0, 0, 0.5);

  /* Level 2 - Élévation moyenne (cards au repos, éléments interactifs) */
  --shadow-2-light:
    inset 0 1px 2px rgba(255, 255, 255, 0.6),
    0 2px 4px rgba(0, 0, 0, 0.18),
    0 4px 8px rgba(0, 0, 0, 0.08);
  --shadow-2-dark:
    inset 0 1px 2px rgba(255, 255, 255, 0.15),
    0 2px 4px rgba(0, 0, 0, 0.8),
    0 4px 8px rgba(0, 0, 0, 0.6);

  /* Level 3 - Grande élévation (hover cards, modales, dropdowns) */
  --shadow-3-light:
    inset 0 1px 2px rgba(255, 255, 255, 0.7),
    0 4px 6px rgba(0, 0, 0, 0.18),
    0 6px 12px rgba(0, 0, 0, 0.08);
  --shadow-3-dark:
    inset 0 1px 2px rgba(255, 255, 255, 0.2),
    0 4px 6px rgba(0, 0, 0, 0.85),
    0 6px 12px rgba(0, 0, 0, 0.7);

  /* Level 4 - Élévation maximale (modales importantes, overlays) */
  --shadow-4-light:
    inset 0 1px 2px rgba(255, 255, 255, 0.8),
    0 8px 16px rgba(0, 0, 0, 0.2),
    0 16px 32px rgba(0, 0, 0, 0.1);
  --shadow-4-dark:
    inset 0 1px 2px rgba(255, 255, 255, 0.25),
    0 8px 16px rgba(0, 0, 0, 0.9),
    0 16px 32px rgba(0, 0, 0, 0.75);
}

/* Configuration du thème Tailwind v4 */
@theme inline {
  /* Couleurs custom */
  --color-light-start: var(--light-start);
  --color-light-end: var(--light-end);
  --color-dark-start: var(--dark-start);
  --color-dark-end: var(--dark-end);
  --color-text-light: var(--text-light);
  --color-text-dark: var(--text-dark);

  /* Polices - seront définies via next/font */
  --font-sans: var(--font-poppins);
  --font-mono: var(--font-chivo-mono);

  /* Border radius custom */
  --radius-custom: 10px;
}

/* Styles de base */
html,
body {
  font-family: var(--font-poppins), sans-serif;
  color: #000000; /* Couleur de texte par défaut (noir) */
  background-color: #f0eeea; /* Fond par défaut light pour éviter le blanc sur mobile */
  min-height: 100vh; /* Force la hauteur minimale */
  min-height: 100dvh; /* Utilise dvh pour gérer la barre d'URL mobile */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* Désactive le bounce effect sur iOS */
  overscroll-behavior: none;
  /* Optimisations pour scroll fluide */
  scroll-behavior: smooth;
}

/* Optimisations de performance pour le scrolling */
html {
  /* Améliore le rendu sur mobile */
  -webkit-overflow-scrolling: touch;
}

/* Transitions fluides pour le changement de thème - ciblées pour éviter les conflits */
/*
body,
div,
section,
span,
p,
h1,
h2,
h3,
button,
a {
  transition: color 0.8s ease-in-out, background-color 1s ease-in-out, border-color 0.8s ease-in-out, background 1s ease-in-out;
}
*/

/* Transitions plus rapides sur mobile - SEULEMENT pour color et border-color, PAS background */
@media (max-width: 640px) {
  body,
  div,
  section,
  span,
  p,
  h1,
  h2,
  h3,
  button,
  a {
    transition: color 0.3s ease-in-out, background-color 0.3s ease-in-out, border-color 0.3s ease-in-out, background 0.3s ease-in-out;
  }
}

/* Exception : pas de transition sur les animations Framer Motion */
[data-framer-component] {
  transition: none !important;
}

/* Dark mode (si la classe 'dark' est ajoutée à <html>) */
html.dark,
html.dark body {
  color: #ffffff;
  background-color: #020204; /* Fond dark pour éviter le blanc sur mobile */
}

/* Transition du background-color uniquement pour html/body */
/*
html,
html.dark {
  transition: background-color 0.8s ease-in-out;
}
*/

/* Classe utilitaire pour texte muted/subtitle */
.text-muted {
  color: var(--text-muted-light);
}

html.dark .text-muted {
  color: var(--text-muted-dark);
}

/* Classe utilitaire pour texte avec gradient primary */
.text-primary {
  background: linear-gradient(135deg, #5c5ef0 0%, #8b5cf6 50%, #a855f7 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

html.dark .text-primary {
  background: linear-gradient(135deg, #818cf8 0%, #a78bfa 50%, #c084fc 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Gradients séparés pour la transition par opacité */
.bg-gradient-light {
  background: linear-gradient(135deg, #f0eeea 0%, #F1ECE2 100%);
  /* Fix pour iOS Safari - force le gradient à remplir tout l'écran */
  min-height: 100vh;
  min-height: -webkit-fill-available;
  height: 100%;
}

.bg-gradient-dark {
  background: linear-gradient(135deg, #020204 0%, #040306 100%);
  /* Fix pour iOS Safari - force le gradient à remplir tout l'écran */
  min-height: 100vh;
  min-height: -webkit-fill-available;
  height: 100%;
}

/* ========================================
   SHADOW UTILITY CLASSES
   ======================================== */

/* Shadow Level 0 - Pas d'ombre */
.shadow-depth-0 {
  box-shadow: var(--shadow-0-light);
}

html.dark .shadow-depth-0 {
  box-shadow: var(--shadow-0-dark);
}

/* Shadow Level 1 - Petite élévation */
.shadow-depth-1 {
  box-shadow: var(--shadow-1-light);
}

html.dark .shadow-depth-1 {
  box-shadow: var(--shadow-1-dark);
}

/* Shadow Level 2 - Élévation moyenne */
.shadow-depth-2 {
  box-shadow: var(--shadow-2-light);
}

html.dark .shadow-depth-2 {
  box-shadow: var(--shadow-2-dark);
}

/* Shadow Level 3 - Grande élévation */
.shadow-depth-3 {
  box-shadow: var(--shadow-3-light);
}

html.dark .shadow-depth-3 {
  box-shadow: var(--shadow-3-dark);
}

/* Shadow Level 4 - Élévation maximale */
.shadow-depth-4 {
  box-shadow: var(--shadow-4-light);
}

html.dark .shadow-depth-4 {
  box-shadow: var(--shadow-4-dark);
}

/* ========================================
   DEPTH UTILITY CLASSES
   ======================================== */

/* BG Bottom - Fond global (le plus sombre en dark mode) */
.bg-depth-bottom {
  background-color: var(--bg-bottom-light);
}

html.dark .bg-depth-bottom {
  background-color: var(--bg-bottom-dark);
}

/* BG Middle - Cards (niveau intermédiaire) */
.bg-depth-middle {
  background-color: var(--bg-middle-light);
}

html.dark .bg-depth-middle {
  background-color: var(--bg-middle-dark);
}

html.dark .hover\:bg-depth-middle-hover:hover {
  background-color: var(--bg-middle-dark-hover);
}

/* BG Top - Éléments cliquables (le plus clair en dark mode) */
.bg-depth-top {
  background-color: var(--bg-top-light);
}

html.dark .bg-depth-top {
  background-color: var(--bg-top-dark);
}

html.dark .hover\:bg-depth-top-hover:hover {
  background-color: var(--bg-top-dark-hover);
}

/* ========================================
   INNER SHADOW - Effet creusé
   ======================================== */

.inner-shadow {
  box-shadow: inset 2px 2px 4px rgba(0, 0, 0, 0.2),
              inset -1px -1px 2px rgba(255, 255, 255, 0.1);
}

html.dark .inner-shadow {
  box-shadow: inset 2px 2px 4px rgba(0, 0, 0, 0.5),
              inset -1px -1px 2px rgba(255, 255, 255, 0.05);
}

/* ========================================
   INNER HIGHLIGHT - Effet bombé/relief
   ======================================== */

.inner-highlight {
  box-shadow: inset -1px -1px 3px rgba(0, 0, 0, 0.2),
              inset 1px 1px 2px rgba(255, 255, 255, 0.3);
}

html.dark .inner-highlight {
  box-shadow: inset -1px -1px 3px rgba(0, 0, 0, 0.4),
              inset 1px 1px 2px rgba(255, 255, 255, 0.15);
}

/* ========================================
   CALENDLY WIDGET STYLES
   ======================================== */

/* Widget inline - fond du conteneur en mode sombre */
html.dark .calendly-container {
  background-color: #020204;
}

/* ========================================
   ANIMATIONS
   ======================================== */

/* Animation de brillance pour le bouton CTA */
@keyframes shine {
  0% {
    left: -100%;
  }
  20% {
    left: 100%;
  }
  100% {
    left: 100%;
  }
}

/* ========================================
   PERFORMANCE OPTIMIZATIONS
   ======================================== */

/* Optimisation des éléments avec parallax/scroll animations */
.parallax-container,
[style*="scale:"],
[style*="y:"],
[style*="opacity:"] {
  will-change: transform, opacity;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  perspective: 1000px;
  -webkit-perspective: 1000px;
}

/* Optimisation pour les éléments animés par Framer Motion */
[data-projection-id] {
  /* Force le rendu sur le GPU */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
}

/* Désactive will-change après les animations pour économiser les ressources */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
    will-change: auto !important;
  }
}
